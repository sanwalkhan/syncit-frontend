<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Syncit</title>
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <!-- 
        <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
        <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
        <script src="bootstrap/js/bootstrap.bundle.min.js"></script> -->
    <!-- Include GSAP from CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Mona+Sans:ital,wght@0,200..900;1,200..900&display=swap"
        rel="stylesheet">

    <!-- Font awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
        integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://icons8.com/icon/118497/facebook">


    <!-- CSS -->
    <link rel="stylesheet" href="style.css">

</head>

<body>

    <div class="top-navbar">
        <nav class="navbar navbar-expand-lg border-bottom px-3">
            <div class="container-fluid">
                <div>
                    <button class="navbar-toggler d-md-none p-0" type="button" data-bs-toggle="collapse"
                        data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false"
                        aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <!-- <a class="navbar-brand" href="#"><span>_</span>Syncit</a> -->
                    <a class="navbar-brand" href="#"><img src="assets/images/Logo.jpg" width="15%" alt=""></a>
                </div>

                <!-- Toggler button for medium screens -->


                <div class="" id="navbarSupportedContent">
                    <ul class="navbar-nav mb-2 mb-lg-0 ms-auto">
                        <li class="nav-item d-none d-md-block">
                            <a class="nav-link" href="#">Contact sales</a>
                        </li>
                        <div class="dropdown">
                            <button class="btn dropdown-toggle p-0 user-profile" type="button" id="dropdownMenuButton"
                                data-bs-toggle="dropdown" aria-expanded="false">
                                <div class="profile d-flex align-items-center justify-content-center">
                                    <p class="m-0">--</p> <!-- User initials -->
                                </div>
                            </button>
                            <ul class="dropdown-menu dropdown-menu-start show-on-top"
                                aria-labelledby="dropdownMenuButton">
                                <li class="mb-3">
                                    <a class="dropdown-item" href="#">--</a> <!-- User name -->
                                </li>
                                <hr class="mx-3" />
                                <li>
                                    <a class="dropdown-item logout-button" href="#">
                                        <img class="mb-1 me-2" src="assets/icons/logout.svg" alt="" />
                                        Log Out
                                    </a>
                                </li>
                            </ul>
                        </div>


                        <!-- <div class="dropdown">
                                <button class="btn dropdown-toggle p-0 user-profile" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
                                    <div class="profile align-items-center justify-content-center">
                                        <p class="">IH</p>
                                    </div>
                                </button>
                                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownMenuButton">
                                    <li class="mb-3">
                                        <a class="dropdown-item" href="#">
                                           Ikram Hassan
                                        </a>
                                    </li>
                                    <hr class="mx-3">
                                    <li>
                                        <a class="dropdown-item" href="#">
                                            <img class="mb-1 me-2" src="assets/icons/logout.svg" alt="">
                                            Log Out
                                        </a>
                                    </li>
                                </ul>
                            </div> -->
                    </ul>
                </div>
                <!-- <button class="navbar-toggler d-md-none p-2" type="button" data-bs-toggle="collapse"
                    data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false"
                    aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button> -->
            </div>
        </nav>

    </div>
    <div class="row g-0">
        <div class="col-md-2">
            <nav class="bg-light p-0">
                <div class=" d-flex flex-column">


                    <!-- Sidebar content -->
                    <div class="collapse d-md-block dashboard-menu p-2 " id="sidebarMenu">
                        <div class="items mt-2">
                            <div class="dropdown create-dropdown">
                                <a href=""></a>
                                <button class="btn btn-create-dropdown btn-warning dropdown-toggle w-100 " type="button"
                                    data-bs-toggle="dropdown" aria-expanded="false">
                                    + Create
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a href="create.html" class="dropdown-item d-flex p-1">
                                            <div class=" create-dropdown-card d-flex border-0 align-items-center">
                                                <div class="card-image me-3">
                                                    <img src="assets/icons/zaps.png" alt="">
                                                </div>

                                                <div class="card-text">
                                                    <h4>Syncs</h4>
                                                    <p>Automated workflow</p>
                                                </div>
                                            </div>
                                        </a></li>
                                    <li><a href="#" class="dropdown-item d-flex p-1">
                                            <div class=" create-dropdown-card d-flex border-0 align-items-center">
                                                <div class="card-image me-3">
                                                    <img src="assets/icons/zaps.png" alt="">
                                                </div>
                                                <div class="card-text">
                                                    <h4>Canvas</h4>
                                                    <p>Process Visualization</p>
                                                </div>
                                            </div>
                                        </a></li>

                                </ul>
                            </div>
                            <a href="#" class="nav-link active" data-target="home"><i class="fa-solid fa-house"
                                    style="color: #ff5f00;"></i> Home</a>
                            <a href="#" class="nav-link" data-target="discover"><i class="fa-solid fa-globe"></i>
                                Discover</a>
                            <hr>
                            <a href="#" class="nav-link" data-target="zaps"><img width="15" height="15"
                                    src="https://img.icons8.com/material-sharp/24/lightning-bolt--v1.png"
                                    alt="lightning-bolt--v1" />Syncs</a>
                            <a href="#" class="nav-link" data-target="Canvas"><img width="15" height="15"
                                    src="https://img.icons8.com/material-outlined/24/flipboard.png"
                                    alt="flipboard" />Canvas</a>
                            <hr>
                            <a href="#" class="nav-link" data-target="dashboard"><img width="15" height="15"
                                    src="https://img.icons8.com/material-sharp/20/squared-menu.png"
                                    alt="squared-menu" />Apps</a>
                            <a href="#" class="nav-link" data-target="dashboard"><img width="15" height="15"
                                    src="https://img.icons8.com/metro/20/available-updates.png"
                                    alt="available-updates" />Syncs History</a>
                            <hr>
                            <a href="#" class="nav-link" data-target="dashboard"><img width="15" height="15"
                                    src="https://img.icons8.com/material-two-tone/20/tasklist.png"
                                    alt="tasklist" />Professional Plan</a>
                        </div>
                    </div>

                </div>
            </nav>
        </div>

        <div class="col-md-10">

            <div class="search-container mt-3 mx-5">
                <div class="d-flex justify-content-between align-items-center">
                    <h2 class="automation-header">What would you like to automate?</h2>
                    <button class="suggestion-btn">Show automation ideas</button>
                </div>
                <div class="mt-3">
                    <div class="d-flex align-items-center gradient-border p-2">
                        <i class="input-icon bi bi-lightning-charge"></i>
                        <input type="text" class="gradient-input w-100"
                            placeholder="Example: When I add a reaction to a Slack message, create a card in Trello." />
                        <button class="arrow-btn">
                            <i class="bi bi-arrow-right"></i>
                        </button>
                    </div>
                </div>
            </div>
            <section id="dashboard-main" class="">
                <section id="syncs" class="">
                    <div class="row g-0 my-4">
                        <h4 class="pt-3">Start form scratch</h4>
                        <div class="col-12 col-sm-6 col-md-6 col-lg-4 g-2 ">
                            <div class=" dashboard-card d-flex border border-1 align-items-center">
                                <div class="card-image me-3">
                                    <img src="assets/icons/zaps.png" alt="">
                                </div>
                                <div class="card-text">
                                    <h4>Zap</h4>
                                    <p>Automated workflow</p>
                                </div>
                            </div>
                        </div>

                        <div class="col-12 col-sm-6 col-md-6 col-lg-4 g-2">
                            <div class=" dashboard-card d-flex border border-1 align-items-center">
                                <div class="card-image me-3">
                                    <img src="assets/icons/zaps.png" alt="">
                                </div>
                                <div class="card-text">
                                    <h4>Canvas</h4>
                                    <p>Process Visualization</p>
                                </div>
                            </div>
                        </div>

                        <!-- <div class="col-12 col-sm-6 col-md-6 col-lg-4 g-2">
                            <div class=" dashboard-card d-flex border border-1 align-items-center">
                                <div class="card-image me-3">
                                    <img src="assets/icons/zaps.png" alt="">
                                </div>
                                <div class="card-text">
                                    <h4>Zap</h4>
                                    <p>Automated workflow</p>
                                </div>
                            </div>
                        </div> -->
                    </div>
                </section>

                <section id="popular-template" class="">
                    <h4 class=" ms-4 pt-3">Popular Templates</h4>

                    <hr class="mt-3">
                    <div class="custom-carousel-container">
                        <div class="custom-carousel-inner">
                            <!-- Carousel Items (5 cards) -->
                            <div class="custom-carousel-item d-flex flex-column">
                                <div class="card border-0">
                                    <div class="icons-container">
                                        <img width="35" height="35"
                                            src="https://img.icons8.com/color/48/facebook-new.png" alt="facebook-new" />
                                        <img width="35" height="35"
                                            src="https://img.icons8.com/color/48/google-sheets.png"
                                            alt="google-sheets" />
                                    </div>
                                    <div class="card-text">
                                        <h6>Add new Facebook Lead Ads leads to rows on Google Sheets</h6>
                                    </div>

                                    <!-- Subtext -->
                                    <div class="card-subtext d-flex align-items-center">
                                        <span class="me-2">游논</span> Used by 6k
                                    </div>
                                </div>
                            </div>
                            <div class="custom-carousel-item d-flex flex-column">
                                <div class="card border-0">
                                    <div class="icons-container">
                                        <img width="35" height="35"
                                            src="https://img.icons8.com/color/48/facebook-new.png" alt="facebook-new" />
                                        <img width="35" height="35"
                                            src="https://img.icons8.com/color/48/google-sheets.png"
                                            alt="google-sheets" />
                                    </div>
                                    <div class="card-text">
                                        <h6>Add new Facebook Lead Ads leads to rows on Google Sheets</h6>
                                    </div>

                                    <!-- Subtext -->
                                    <div class="card-subtext d-flex align-items-center">
                                        <span class="me-2">游논</span> Used by 6k
                                    </div>
                                </div>
                            </div>
                            <div class="custom-carousel-item d-flex flex-column">
                                <div class="card border-0">
                                    <div class="icons-container">
                                        <img width="35" height="35"
                                            src="https://img.icons8.com/color/48/facebook-new.png" alt="facebook-new" />
                                        <img width="35" height="35"
                                            src="https://img.icons8.com/color/48/google-sheets.png"
                                            alt="google-sheets" />
                                    </div>
                                    <div class="card-text">
                                        <h6>Add new Facebook Lead Ads leads to rows on Google Sheets</h6>
                                    </div>

                                    <!-- Subtext -->
                                    <div class="card-subtext d-flex align-items-center">
                                        <span class="me-2">游논</span> Used by 6k
                                    </div>
                                </div>
                            </div>
                            <div class="custom-carousel-item d-flex flex-column">
                                <div class="card border-0">
                                    <div class="icons-container">
                                        <img width="35" height="35"
                                            src="https://img.icons8.com/color/48/facebook-new.png" alt="facebook-new" />
                                        <img width="35" height="35"
                                            src="https://img.icons8.com/color/48/google-sheets.png"
                                            alt="google-sheets" />
                                    </div>
                                    <div class="card-text">
                                        <h6>Add new Facebook Lead Ads leads to rows on Google Sheets</h6>
                                    </div>

                                    <!-- Subtext -->
                                    <div class="card-subtext d-flex align-items-center">
                                        <span class="me-2">游논</span> Used by 6k
                                    </div>
                                </div>
                            </div>
                            <div class="custom-carousel-item d-flex flex-column">
                                <div class="card border-0">
                                    <div class="icons-container">
                                        <img width="35" height="35"
                                            src="https://img.icons8.com/color/48/facebook-new.png" alt="facebook-new" />
                                        <img width="35" height="35"
                                            src="https://img.icons8.com/color/48/google-sheets.png"
                                            alt="google-sheets" />
                                    </div>
                                    <div class="card-text">
                                        <h6>Add new Facebook Lead Ads leads to rows on Google Sheets</h6>
                                    </div>

                                    <!-- Subtext -->
                                    <div class="card-subtext d-flex align-items-center">
                                        <span class="me-2">游논</span> Used by 6k
                                    </div>
                                </div>
                            </div>

                            <!-- Duplicate Items for Infinite Scrolling -->

                            <div class="custom-carousel-item d-flex flex-column">
                                <div class="card border-0">
                                    <div class="icons-container">
                                        <img width="35" height="35"
                                            src="https://img.icons8.com/color/48/facebook-new.png" alt="facebook-new" />
                                        <img width="35" height="35"
                                            src="https://img.icons8.com/color/48/google-sheets.png"
                                            alt="google-sheets" />
                                    </div>
                                    <div class="card-text">
                                        <h6>Add new Facebook Lead Ads leads to rows on Google Sheets</h6>
                                    </div>

                                    <!-- Subtext -->
                                    <div class="card-subtext d-flex align-items-center">
                                        <span class="me-2">游논</span> Used by 6k
                                    </div>
                                </div>
                            </div>
                            <div class="custom-carousel-item d-flex flex-column">
                                <div class="card border-0">
                                    <div class="icons-container">
                                        <img width="35" height="35"
                                            src="https://img.icons8.com/color/48/facebook-new.png" alt="facebook-new" />
                                        <img width="35" height="35"
                                            src="https://img.icons8.com/color/48/google-sheets.png"
                                            alt="google-sheets" />
                                    </div>
                                    <div class="card-text">
                                        <h6>Add new Facebook Lead Ads leads to rows on Google Sheets</h6>
                                    </div>

                                    <!-- Subtext -->
                                    <div class="card-subtext d-flex align-items-center">
                                        <span class="me-2">游논</span> Used by 6k
                                    </div>
                                </div>
                            </div>
                            <div class="custom-carousel-item d-flex flex-column">
                                <div class="card border-0">
                                    <div class="icons-container">
                                        <img width="35" height="35"
                                            src="https://img.icons8.com/color/48/facebook-new.png" alt="facebook-new" />
                                        <img width="35" height="35"
                                            src="https://img.icons8.com/color/48/google-sheets.png"
                                            alt="google-sheets" />
                                    </div>
                                    <div class="card-text">
                                        <h6>Add new Facebook Lead Ads leads to rows on Google Sheets</h6>
                                    </div>

                                    <!-- Subtext -->
                                    <div class="card-subtext d-flex align-items-center">
                                        <span class="me-2">游논</span> Used by 6k
                                    </div>
                                </div>
                            </div>
                            <div class="custom-carousel-item d-flex flex-column">
                                <div class="card border-0">
                                    <div class="icons-container">
                                        <img width="35" height="35"
                                            src="https://img.icons8.com/color/48/facebook-new.png" alt="facebook-new" />
                                        <img width="35" height="35"
                                            src="https://img.icons8.com/color/48/google-sheets.png"
                                            alt="google-sheets" />
                                    </div>
                                    <div class="card-text">
                                        <h6>Add new Facebook Lead Ads leads to rows on Google Sheets</h6>
                                    </div>

                                    <!-- Subtext -->
                                    <div class="card-subtext d-flex align-items-center">
                                        <span class="me-2">游논</span> Used by 6k
                                    </div>
                                </div>
                            </div>
                            <div class="custom-carousel-item d-flex flex-column">
                                <div class="card border-0">
                                    <div class="icons-container">
                                        <img width="35" height="35"
                                            src="https://img.icons8.com/color/48/facebook-new.png" alt="facebook-new" />
                                        <img width="35" height="35"
                                            src="https://img.icons8.com/color/48/google-sheets.png"
                                            alt="google-sheets" />
                                    </div>
                                    <div class="card-text">
                                        <h6>Add new Facebook Lead Ads leads to rows on Google Sheets</h6>
                                    </div>

                                    <!-- Subtext -->
                                    <div class="card-subtext d-flex align-items-center">
                                        <span class="me-2">游논</span> Used by 6k
                                    </div>
                                </div>
                            </div>

                        </div>

                        <!-- Carousel Controls -->
                        <button class="custom-carousel-control-prev">&#10094;</button>
                        <button class="custom-carousel-control-next">&#10095;</button>
                    </div>
                </section>
            </section>
        </div>
    </div>



    <script src="script.js">// Function to fetch the user's profile
        const fetchUserProfile = async () => {
            try {
                // Fetch user profile from the backend
                const response = await fetch('http://localhost:5000/api/auth/profile', {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${localStorage.getItem('token')}`,
                    },
                });

                if (!response.ok) {
                    throw new Error('Failed to fetch user profile');
                }

                const user = await response.json();

                // Update user initials in the dropdown toggle button
                const initials = `${user.firstName.charAt(0).toUpperCase()}${user.lastName.charAt(0).toUpperCase()}`;
                document.querySelector('.user-profile .profile p').textContent = initials;

                // Update user name in the dropdown menu
                document.querySelector('.dropdown-item').textContent = `${user.firstName} ${user.lastName}`;

                // (Optional) If a profile picture is available, update it
                if (user.profilePicture) {
                    const profileDiv = document.querySelector('.user-profile .profile');
                    profileDiv.style.backgroundImage = `url(${user.profilePicture})`;
                    profileDiv.style.backgroundSize = 'cover';
                    profileDiv.style.color = 'transparent'; // Hide initials if a profile picture is shown
                }
            } catch (error) {
                console.error('Error fetching user profile:', error);

                // Redirect to login page if unauthorized
                if (error.message === 'Failed to fetch user profile') {
                    window.location.href = 'login.html';
                }
            }
        };

        // Function to log out the user
        const logoutUser = () => {
            // Clear the token from local storage
            localStorage.removeItem('token');

            // Redirect to the login page
            window.location.href = 'login.html';
        };

        // Attach logout event listener
        document.querySelector('.logout-button').addEventListener('click', logoutUser);

        // Fetch user profile on page load
        fetchUserProfile();
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="main.js"></script>

</body>

</html>